<div class="widget-content" data-unavailable="[]">
  <%= simple_form_for :search, url: pets_path, method: :get, html: { class: "pet-search-form mb-2" }, data: { controller: 'flatpickr', flatpickr_start_time_value: "#starttime", flatpickr_end_time_value: "#endtime" } do |f| %>
    <input class="form-control string required" type="text" placeholder="Where" name="search[where]" />
    <div class="d-flex">
      <input class="form-control string required" type="text" placeholder="From" name="search[from]" data-flatpickr-target="startTime"/>
      <input class="form-control string required" type="text" placeholder="To" name="search[to]" data-flatpickr-target="endTime" />
    </div>
    <input class="form-control string required" type="text" placeholder="Type of pet" name="search[type]" />
    <button name="button" type="submit" class="btn btn-flat">
      <i class="fas fa-search"></i> Search
    </button>
  <% end %>
</div>

<% @pets.each do |pet| %>
  <div class="card mx-auto card-pet my-3">
    <div class="heart-button position-absolute top-0 end-0">
      <i
        data-controller="heart-button"
        data-heart-button-url-value="<%= current_user.bookmarked?(pet) ? pet_bookmark_url(pet, pet.bookmark(current_user)) : pet_bookmarks_url(pet) %>"
        data-action="click->heart-button#toggleBookmark"
        class="fas fa-heart fa-2x <%= "heart-red" if current_user.bookmarked?(pet) %>">
      </i>
    </div>
    <% if pet.photos.present? %>
      <%= image_tag pet.photos.first.url, class: 'rounded-bottom-4 card-img-top', alt: 'Pet picture' %>
    <% else %>
      <%= image_tag 'cat', alt: 'Pet picture', class: 'rounded-bottom-4 card-img-top' %>
    <% end %>
    <div class="d-flex">
      <div class="p-2 align-self-center mr-auto">
        <h2 class="m-0"><%= pet.name %></h2>
        <p class="m-0"><%= pet.user.address %></p>
        <p class="m-0">Id:<%= pet.id %></p>
      </div>
      <div class="p-2 align-self-center card-rating">
        <% pet.average_rating.times do %>
          <i class="fa-solid fa-star"></i>
        <% end %>
      </div>
    </div>
    <p class="card-text p-1">
      <%= pet.description %>
    </p>
    <p class="btn btn-flat my-0">
      Read more
    </p>
  </div>
<% end %>
